<template>
    <lightning-quick-action-panel header="Confirmation Screen">
      <div>
        <div class="slds-text-heading_medium slds-align_absolute-center atsColor">Congrats your order has been submitted!</div>
        <div class="slds-grid slds-m-top_x-small">
            <div class="slds-col">
                <p>Order For: <span class="weight">{info.accName}</span></p>
                <p>First Delivery Date: <span class="weight">{info.showDate}</span></p>
            </div>
            <div class="slds-col">
                <p>Warehouse: <span class="weight">{info.whNumb}</span></p>
                <p>ShipType: <span class="weight">{info.shipType}</span></p>
            </div>
        </div>
    </div>
    <div class="slds-text-heading_medium slds-m-top_x-small">Products Ordered</div>
    <div class="products slds-scrollable_y">
        <table>
            <th>Product</th>
            <th>QTY</th>
            <th>Price</th>
            <th>Margin</th>
            <tbody>
                <template if:true={prods} for:each={prods} for:item="x" for:index="index">
                    <tr key={x.Id}>
                        <td>
                            {x.shortName}
                        </td>
                        <td>
                            {x.Quantity}
                        </td>
                        <td>
                            ${x.CPQ_Unit_Price__c}
                        </td>
                        <!-- <td style={x.marginCheck}>
                            {x.margin}%
                        </td> -->
                        <template lwc:if={x.goodMargin}>
                            <td class="showGreen">
                                {x.margin}%
                            </td>
                        </template>
                        <template lwc:else>
                            <td>
                                {x.margin}%
                            </td>
                        </template>
                    </tr>
                </template>
            </tbody>
        </table>
            <div class="slds-grid slds-m-top_small">
                <div class="slds-col">Total Units: <span class='weight'>{totalUnits}</span></div>
                <div class="slds-col">Total Price: <span class='weight'>${totalPrice}</span></div> 
                <div class="slds-col">
                    <lightning-helptext content="No agency or shipping"></lightning-helptext>
                    Average Margin: <span class='weight'>{avgMargin}%</span> 
                    <template lwc:if={fireMargin}>
                        ðŸ”¥ðŸ’£ðŸ’¥ðŸ’£ðŸ”¥
                    </template>  
                    <template lwc:elseif={greatmargin}>
                        ðŸ”¥ðŸ”¥ðŸ”¥
                    </template>  
                    <template lwc:elseif={goodMargin}>
                            ðŸ”¥
                        </template>
                </div>

            </div>
      </div>
      <div slot="footer">
          <!-- define custom footer actions here -->
          <lightning-button
                variant="brand"
                label="Close Screen"
                class="slds-m-left_x-small"
                onclick={handleConfirm}
                ></lightning-button>
      </div>
    </lightning-quick-action-panel>
</template>